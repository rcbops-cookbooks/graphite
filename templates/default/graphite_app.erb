# This file autogenerated by Chef
# Do not edit, changes will be overwritten
<% if not node["custom_template_banner"].nil? %>
<%= node["custom_template_banner"] %>
<% end %>
<VirtualHost <%= @params[:bind_host] %>:<%= @params[:bind_port] %>>

    ServerName <%= @params[:server_name] %>

    <Location "/">
        SetHandler python-program
        PythonHandler django.core.handlers.modpython
        SetEnv DJANGO_SETTINGS_MODULE graphite.settings
        PythonDebug Off
        PythonAutoReload Off
        PythonPath "['<%= @params[:graphite_pythonpath] %>'] + sys.path"
    </Location>

    <Location /server-status>
        SetHandler server-status
        Order deny,allow
        Deny from all
        Allow from localhost
    </Location>

    <Location "/content/">
        SetHandler None
    </Location>

    <Location "/media/">
        SetHandler None
    </Location>

    Alias /content/ "<%= @params[:graphite_pythonpath] %>/content/"
    Alias /media/ "/usr/lib/pymodules/python2.7/django/contrib/admin/media/"
    ErrorLog "<%= @params[:graphite_log_dir] %>/webapp-error.log"
    CustomLog "<%= @params[:graphite_log_dir] %>/webapp-access.log" common

</VirtualHost>
